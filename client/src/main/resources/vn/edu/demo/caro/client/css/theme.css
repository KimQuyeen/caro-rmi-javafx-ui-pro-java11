.root { -fx-font-family: "SF Pro Display", "Inter", "System"; -fx-font-size: 13px; -fx-background-color: #0f172a; }
.app-bg { -fx-background-color: #0f172a; }

.card { -fx-background-color: rgba(255,255,255,0.06); -fx-background-radius: 14; -fx-border-radius: 14; -fx-border-color: rgba(255,255,255,0.10); -fx-border-width: 1; }
.card-padding { -fx-padding: 14; }

.h1 { -fx-font-size: 20px; -fx-font-weight: 700; -fx-text-fill: #e2e8f0; }
.h2 { -fx-font-size: 14px; -fx-font-weight: 700; -fx-text-fill: #e2e8f0; }
.muted { -fx-text-fill: rgba(226,232,240,0.70); }
.label { -fx-text-fill: #e2e8f0; }

.text-field, .password-field, .combo-box-base, .text-area {
  -fx-background-color: rgba(255,255,255,0.08);
  -fx-background-radius: 10; -fx-border-radius: 10;
  -fx-border-color: rgba(255,255,255,0.12);
  -fx-text-fill: #e2e8f0;
  -fx-prompt-text-fill: rgba(226,232,240,0.55);
}
.text-area .content { -fx-background-color: transparent; }

.cell {
  -fx-background-color: rgba(255,255,255,0.06);
  -fx-background-radius: 10;
  -fx-border-radius: 10;
  -fx-border-color: rgba(255,255,255,0.12);
  -fx-text-fill: #e2e8f0;
  -fx-font-weight: 800;
  -fx-font-size: 14px;
}
.cell:hover { -fx-background-color: rgba(255,255,255,0.10); }

.button {
  -fx-background-color: rgba(255,255,255,0.10);
  -fx-text-fill: #e2e8f0;
  -fx-background-radius: 10;
  -fx-padding: 8 12 8 12;
  -fx-font-weight: 600;
}
.button:hover { -fx-background-color: rgba(255,255,255,0.16); }
.button.primary { -fx-background-color: #38bdf8; -fx-text-fill: #0b1220; }
.button.primary:hover { -fx-background-color: #7dd3fc; }
.button.danger { -fx-background-color: rgba(239,68,68,0.85); -fx-text-fill: white; }

.separator *.line { -fx-border-color: rgba(255,255,255,0.12); }

.list-view, .table-view {
  -fx-background-color: transparent;
  -fx-control-inner-background: rgba(255,255,255,0.05);
  -fx-background-radius: 12;
  -fx-border-radius: 12;
  -fx-border-color: rgba(255,255,255,0.10);
}
.list-cell { -fx-text-fill: #e2e8f0; -fx-background-color: transparent; }
.list-cell:filled:selected, .list-cell:filled:selected:hover { -fx-background-color: rgba(56,189,248,0.18); }

.table-view .column-header-background { -fx-background-color: rgba(255,255,255,0.06); }
.table-view .column-header, .table-view .filler { -fx-background-color: transparent; }
.table-view .column-header .label { -fx-text-fill: rgba(226,232,240,0.85); -fx-font-weight: 700; }

.sidebar { -fx-background-color: rgba(255,255,255,0.05); -fx-border-color: rgba(255,255,255,0.10); -fx-border-width: 0 1 0 0; }
.nav-btn {
  -fx-background-color: transparent;
  -fx-text-fill: rgba(226,232,240,0.85);
  -fx-font-weight: 700;
  -fx-alignment: CENTER_LEFT;
  -fx-padding: 10 12 10 12;
  -fx-background-radius: 10;
}
.nav-btn:hover { -fx-background-color: rgba(255,255,255,0.08); }
.nav-btn.active { -fx-background-color: rgba(56,189,248,0.18); -fx-text-fill: #e2e8f0; }

.badge { -fx-background-color: rgba(56,189,248,0.20); -fx-text-fill: #e2e8f0; -fx-background-radius: 999; -fx-padding: 2 8 2 8; -fx-font-size: 11px; -fx-font-weight: 700; }
.card-pad {
  -fx-background-color: rgba(255,255,255,0.06);
  -fx-background-radius: 14;
  -fx-border-radius: 14;
  -fx-border-color: rgba(255,255,255,0.10);
  -fx-border-width: 1;
  -fx-padding: 14;
}
.chat-bubble-mine {
    -fx-background-color: rgba(120, 200, 255, 0.25);
    -fx-background-radius: 14;
    -fx-padding: 8 10;
    -fx-text-fill: #000000;
    -fx-max-width: 260px;
}

.chat-bubble-other {
    -fx-background-color: rgba(255, 255, 255, 0.85);
    -fx-background-radius: 14;
    -fx-padding: 8 10;
    -fx-text-fill: #000000;
    -fx-max-width: 260px;
}
.board-pane {
    -fx-background-color: rgba(255,255,255,0.95);
    -fx-background-radius: 12;
    -fx-padding: 10;
}

.game-grid {
    -fx-background-color: rgba(255, 255, 255, 0.15); 
    -fx-padding: 2;
    -fx-hgap: 1;
    -fx-vgap: 1;
    -fx-background-radius: 4;
}

/* Ô cờ (Button): Quan trọng là border và background */
.game-cell-btn {
    -fx-background-color: rgba(15, 23, 42, 0.6); /* Màu nền tối khớp với theme */
    -fx-border-color: rgba(255, 255, 255, 0.1);  /* Viền mờ */
    -fx-border-width: 0.5;
    -fx-background-radius: 0;
    -fx-border-radius: 0;
}

.game-cell-btn:hover {
    -fx-background-color: rgba(255, 255, 255, 0.15);
    -fx-cursor: hand;
}

/* Label chứa chữ X/O */
.game-cell-label {
    -fx-font-family: "Segoe UI", "Inter", sans-serif;
    -fx-font-weight: 900;
    -fx-font-size: 22px;
    -fx-alignment: CENTER;
}

/* Màu riêng cho X (Đỏ rực) */
.mark-x {
    -fx-text-fill: #ff4d4f; 
    -fx-effect: dropshadow(three-pass-box, rgba(255, 77, 79, 0.6), 10, 0, 0, 0);
}

/* Màu riêng cho O (Xanh sáng) */
.mark-o {
    -fx-text-fill: #40a9ff;
    -fx-effect: dropshadow(three-pass-box, rgba(64, 169, 255, 0.6), 10, 0, 0, 0);
}
.clickable-label {
    -fx-underline: true;
    -fx-cursor: hand;
}
/* Bubble chung */
/* ==================================================================
   FIX CHAT UI - Thay thế đoạn cuối file app.css bằng đoạn này
   ================================================================== */

/* 1. Tin nhắn CỦA MÌNH (Bên phải) */
.chat-bubble-me {
    -fx-background-color: #38bdf8; /* Màu xanh sáng chủ đạo */
    -fx-background-radius: 14 14 0 14; /* Bo góc tạo hướng nói */
    -fx-padding: 8 12;
    -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 4, 0, 0, 2);
}
/* Chữ bên trong bubble của mình */
.chat-bubble-me .chat-content {
    -fx-text-fill: #0f172a; /* Chữ màu tối trên nền xanh */
    -fx-font-size: 13px;
    -fx-font-weight: 600;
}
.chat-bubble-me .chat-from {
    -fx-text-fill: #0f172a;
    -fx-opacity: 0.7;
    -fx-font-size: 11px;
    -fx-font-weight: 700;
}
.chat-bubble-me .chat-time {
    -fx-text-fill: #0f172a;
    -fx-opacity: 0.6;
    -fx-font-size: 10px;
}

/* 2. Tin nhắn NGƯỜI KHÁC (Bên trái) */
.chat-bubble-other {
    -fx-background-color: #334155; /* Màu xám xanh đậm (Slate 700) - Tương phản tốt với nền #0f172a */
    -fx-background-radius: 14 14 14 0;
    -fx-padding: 8 12;
    -fx-border-color: rgba(255,255,255,0.1);
    -fx-border-width: 1;
    -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 4, 0, 0, 2);
}
/* Chữ bên trong bubble người khác */
.chat-bubble-other .chat-content {
    -fx-text-fill: #f1f5f9; /* Chữ trắng sáng (Slate 100) - Rất rõ trên nền xám */
    -fx-font-size: 13px;
}
.chat-bubble-other .chat-from {
    -fx-text-fill: #94a3b8; /* Tên người gửi màu xám nhạt */
    -fx-font-size: 11px;
    -fx-font-weight: 700;
}
.chat-bubble-other .chat-time {
    -fx-text-fill: #64748b; /* Giờ gửi màu tối hơn chút */
    -fx-font-size: 10px;
}

/* Xóa các class cũ gây xung đột nếu còn sót lại ở phía trên file */
.chat-other, .chat-me {
    -fx-padding: 0; /* Reset */
}