<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="vn.edu.demo.caro.client.controller.view.RoomsViewController"
      spacing="14">

    <padding>
        <Insets top="14" right="14" bottom="14" left="14"/>
    </padding>

    <!-- Header -->
    <HBox spacing="10" alignment="CENTER_LEFT">
        <Label text="Phòng và Ghép trận" styleClass="h1"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label fx:id="lbOnline" text="Online: 0" styleClass="badge"/>
    </HBox>

    <HBox spacing="14">
        <!-- Left: Room list + actions -->
        <VBox spacing="10" styleClass="card-pad" prefWidth="520">
            <Label text="Danh sách phòng trống" styleClass="h2"/>
            <ListView fx:id="lvRooms" VBox.vgrow="ALWAYS"/>

            <HBox spacing="10">
                <Button text="Vào phòng" onAction="#onJoinSelected" styleClass="primary"/>
                <Button text="Chơi nhanh" onAction="#onQuickPlay"/>
            </HBox>
        </VBox>

        <!-- Right: Create room form -->
        <VBox spacing="10" styleClass="card-pad" prefWidth="520">
            <Label text="Tạo phòng" styleClass="h2"/>

            <GridPane hgap="10" vgap="10">
                <columnConstraints>
                    <ColumnConstraints minWidth="140" prefWidth="160"/>
                    <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>

                <!-- Room name -->
                <Label text="Tên phòng:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="tfRoomName"
                           promptText="Nhập tên phòng..."
                           GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                <!-- Board size -->
                <Label text="Kích thước bàn:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <ComboBox fx:id="cbBoardSize"
                          promptText="Chọn kích thước"
                          GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                <!-- Rule: block two ends -->
                <Label text="Luật chơi:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <CheckBox fx:id="chkBlockTwoEnds"
                          text="Chặn 2 đầu"
                          GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                <!-- Time limit -->
                <Label text="Thời gian/lượt:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <HBox spacing="10" alignment="CENTER_LEFT"
                      GridPane.rowIndex="3" GridPane.columnIndex="1">
                    <CheckBox fx:id="chkTimed" text="Bật giới hạn"/>
                    <ComboBox fx:id="cbTimeSeconds" prefWidth="160" promptText="Chọn (giây)"/>
                    <Label text="giây" styleClass="muted"/>
                </HBox>

                <!-- Password -->
                <Label text="Mật khẩu:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                <HBox spacing="10" alignment="CENTER_LEFT"
                      GridPane.rowIndex="4" GridPane.columnIndex="1">
                    <CheckBox fx:id="chkPassword" text="Bật"/>
                    <PasswordField fx:id="pfRoomPassword"
                                   promptText="Nhập mật khẩu..."
                                   prefWidth="220"/>
                </HBox>
            </GridPane>

            <HBox spacing="10">
                <Button text="Tạo phòng" onAction="#onCreateRoom" styleClass="primary"/>
            </HBox>

            <Separator/>

            <Label text="Hướng dẫn nhanh" styleClass="h2"/>
            <Label text="• Tạo phòng: chọn kích thước bàn, luật chặn 2 đầu, bật/tắt thời gian và mật khẩu.\n• Chọn một phòng trong danh sách để vào.\n• Khi đủ 2 người, server tự bắt đầu trận."
                   wrapText="true"
                   styleClass="muted"/>
        </VBox>
    </HBox>
</VBox>
